#!/bin/sh
# Script run after removal

set -e

case "$1" in
    purge)
        # UsuÅ„ pliki konfiguracyjne tylko przy purge
        echo "ðŸ§¹ Purging configuration files"
        rm -rf /etc/nas-web/ /var/log/nas-web/
        
        # UsuÅ„ uÅ¼ytkownika jeÅ›li nie jest uÅ¼ywany
        if id nasweb >/dev/null 2>&1; then
            if ! ps -u nasweb >/dev/null; then
                userdel nasweb 2>/dev/null || true
                echo "ðŸ‘¤ Removed nasweb user"
            fi
        fi
        
        if getent group nasweb >/dev/null; then
            if ! getent passwd | grep -q ":.*:.*:.*:nasweb"; then
                groupdel nasweb 2>/dev/null || true
                echo "ðŸ‘¥ Removed nasweb group"
            fi
        fi
        ;;
        
    remove)
        # Zachowaj pliki konfiguracyjne przy remove
        echo "ðŸ“‹ Configuration files preserved (use 'purge' to remove)"
        ;;
esac

exit 0