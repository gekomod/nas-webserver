import{_ as U,u as V,r as m,y as w,o as W,b as g,v as j,h as D,e as p,w as o,x as A,d as F,i as B,g as s,k as a,f as n,I as r,t as h,n as L,E as x}from"./index-JqcLm-KS.js";const T={class:"widget-header"},$={class:"header-actions"},G={class:"device-cell"},K={class:"vendor-cell"},O={class:"capacity-cell"},R={key:0,class:"error-message"},q={name:"StorageDisksWidget",displayName:"Dyski magazynujÄ…ce"},H=Object.assign(q,{setup(J){const{t}=V(),y=m([]),d=m(!1),v=m(!1),f=m(null);w.defaults.baseURL=`${window.location.protocol}//${window.location.hostname}:3000`;const z=e=>e.startsWith("nvme")?"mdi:memory":(e.startsWith("sd"),"mdi:harddisk"),b=e=>({Samsung:"simple-icons:samsung","Western Digital":"simple-icons:westerndigital",Seagate:"simple-icons:seagate",Toshiba:"simple-icons:toshiba",Intel:"simple-icons:intel"})[e]||null,C=(e,i=2)=>{if(e===0)return"0 Bytes";const u=1024,_=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(e)/Math.log(u));return parseFloat((e/Math.pow(u,l)).toFixed(i))+" "+_[l]},k=async()=>{try{d.value=!0;const e=await w.get("/api/storage/disks");Array.isArray(e.data?.data)&&(y.value=e.data.data.map(i=>({device:i.device||"Unknown",model:i.model||"Unknown",serial:i.serial||"Unknown",vendor:i.vendor||"Unknown",size:i.size||0})))}catch(e){f.value=t("storageDisks.errorLoading"),console.error("Error fetching disks:",e)}finally{d.value=!1}},I=async()=>{await k()},N=async()=>{try{v.value=!0,await w.post("/api/storage/rescan"),await k(),x.success({title:t("storageDisks.scanSuccess"),message:t("storageDisks.scanComplete")})}catch(e){x.error({title:t("storageDisks.scanError"),message:e.message})}finally{v.value=!1}};return W(k),(e,i)=>{const u=g("el-button"),_=g("el-tooltip"),l=g("el-table-column"),M=g("el-table"),S=g("el-card"),E=j("loading");return p(),D(S,{class:"storage-disks-widget"},{header:o(()=>[n("div",T,[s(a(r),{icon:"mdi:harddisk",width:"20",height:"20"}),n("span",null,h(a(t)("storageDisks.title")),1),n("div",$,[s(_,{content:a(t)("storageDisks.refresh")},{default:o(()=>[s(u,{size:"small",onClick:I,loading:d.value,text:""},{default:o(()=>[s(a(r),{icon:"mdi:refresh",width:"16",height:"16",class:L({spin:d.value})},null,8,["class"])]),_:1},8,["loading"])]),_:1},8,["content"]),s(_,{content:a(t)("storageDisks.scanNew")},{default:o(()=>[s(u,{size:"small",onClick:N,loading:v.value,text:""},{default:o(()=>[s(a(r),{icon:"mdi:magnify-scan",width:"16",height:"16"})]),_:1},8,["loading"])]),_:1},8,["content"])])])]),default:o(()=>[A((p(),D(M,{data:y.value,style:{width:"100%"}},{default:o(()=>[s(l,{label:a(t)("storageDisks.device"),prop:"device",width:"120"},{default:o(({row:c})=>[n("div",G,[s(a(r),{icon:z(c.device),width:"18",height:"18"},null,8,["icon"]),n("span",null,h(c.device),1)])]),_:1},8,["label"]),s(l,{label:a(t)("storageDisks.model"),prop:"model"},null,8,["label"]),s(l,{label:a(t)("storageDisks.serial"),prop:"serial"},null,8,["label"]),s(l,{label:a(t)("storageDisks.vendor"),prop:"vendor"},{default:o(({row:c})=>[n("div",K,[b(c.vendor)?(p(),D(a(r),{key:0,icon:b(c.vendor),width:"18",height:"18"},null,8,["icon"])):B("",!0),n("span",null,h(c.vendor),1)])]),_:1},8,["label"]),s(l,{label:a(t)("storageDisks.capacity"),prop:"size",width:"120"},{default:o(({row:c})=>[n("div",O,[s(a(r),{icon:"mdi:database",width:"16",height:"16"}),n("span",null,h(C(c.size)),1)])]),_:1},8,["label"])]),_:1},8,["data"])),[[E,d.value]]),f.value?(p(),F("div",R,[s(a(r),{icon:"mdi:alert-circle",width:"18",height:"18"}),n("span",null,h(f.value),1)])):B("",!0)]),_:1})}}}),Q=U(H,[["__scopeId","data-v-05f9ad90"]]);export{Q as default};
