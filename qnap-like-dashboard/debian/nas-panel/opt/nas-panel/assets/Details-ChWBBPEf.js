import{_ as C,u as I,b as u,h as S,e as g,w as t,g as e,k as i,m as d,t as o,f as v,c as x,v as V,d as T,x as P,y as $,A as L,a as j,r as z,o as E,i as A,I as O}from"./index-JqcLm-KS.js";const U={class:"speed-info"},F={class:"speed-current"},G={class:"speed-label"},H={class:"speed-max"},q={class:"speed-label"},W={__name:"DeviceBasicInfo",props:{device:{type:Object,required:!0}},setup(r){const{t:l}=I(),b=(a,s=2)=>{if(a===0)return"0 Bytes";const _=1024,n=["Bytes","KB","MB","GB","TB"],m=Math.floor(Math.log(a)/Math.log(_));return parseFloat((a/Math.pow(_,m)).toFixed(s)+" "+n[m])},p=a=>a?.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")||"0",c=a=>a?a.string||`${a.units_per_second} Gb/s`:l("common.na"),h=a=>a>60?"danger":a>50?"warning":"success",y=a=>a?a.passed?"success":"danger":"info",w=a=>a?a.passed?"PASSED":"FAILED":"Nieznany";return(a,s)=>{const _=u("el-tag"),n=u("el-descriptions-item"),m=u("el-descriptions");return g(),S(m,{column:2,border:""},{default:t(()=>[e(n,{label:i(l)("storageSmart.details.produce")},{default:t(()=>[e(_,null,{default:t(()=>[d(o(r.device.model_family),1)]),_:1})]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.model")},{default:t(()=>[d(o(r.device.model_name),1)]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.serial")},{default:t(()=>[d(o(r.device.serial_number),1)]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.capacity")},{default:t(()=>[d(o(b(r.device.user_capacity.bytes)),1)]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.temperature")},{default:t(()=>[e(_,{type:h(r.device.temperature.current)},{default:t(()=>[d(o(r.device.temperature.current)+"°C ",1)]),_:1},8,["type"])]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.smartStatus")},{default:t(()=>[e(_,{type:y(r.device.smart_status),effect:"dark"},{default:t(()=>[d(o(w(r.device.smart_status)),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.powerCycleCount")},{default:t(()=>[e(_,{type:"info"},{default:t(()=>[d(o(p(r.device.power_cycle_count)||i(l)("common.na")),1)]),_:1})]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.powerOnHours")},{default:t(()=>[e(_,{type:"info"},{default:t(()=>[d(o(p(r.device.power_on_time?.hours)||0)+" "+o(i(l)("storageSmart.details.hours")),1)]),_:1})]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.firmware")},{default:t(()=>[d(o(r.device.firmware_version),1)]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.wwn")},{default:t(()=>[d(o(r.device.wwn.naa)+"x"+o(r.device.wwn.id),1)]),_:1},8,["label"]),e(n,{label:i(l)("storageSmart.details.interfaceSpeed")},{default:t(()=>[v("div",U,[v("div",F,[e(_,{type:"info"},{default:t(()=>[d(o(c(r.device.interface_speed?.current)),1)]),_:1}),v("span",G,o(i(l)("storageSmart.details.currentSpeed")),1)]),v("div",H,[e(_,null,{default:t(()=>[d(o(c(r.device.interface_speed?.max)),1)]),_:1}),v("span",q,o(i(l)("storageSmart.details.maxSpeed")),1)])])]),_:1},8,["label"])]),_:1})}}},J=C(W,[["__scopeId","data-v-3165ccdd"]]),K={class:"smart-attributes-container"},Q={key:1},X={__name:"SmartAttributes",props:{attributes:{type:Object,required:!0,default:()=>({table:[]})}},setup(r){const{t:l}=I(),b=r,p=x(()=>!b.attributes.table),c=x(()=>b.attributes?.table?b.attributes.table.map(s=>({...s,name:h(s.name)})):[]),h=s=>({Raw_Read_Error_Rate:"Wskaźnik błędów odczytu",Spin_Up_Time:"Czas rozruchu",Start_Stop_Count:"Liczba start/stop",Reallocated_Sector_Ct:"Liczba realokowanych sektorów",Power_On_Hours:"Godziny pracy",Power_Cycle_Count:"Liczba cykli włączeń"})[s]||s,y=s=>s.value<=s.thresh?"danger":s.value-s.thresh<10?"warning":"success",w=s=>s.value<=s.thresh?l("storageSmart.status.failed"):l("storageSmart.status.passed"),a=s=>typeof s=="number"?s.toLocaleString():s||"-";return(s,_)=>{const n=u("el-table-column"),m=u("el-tag"),k=u("el-tooltip"),D=u("el-table"),B=V("loading");return g(),T("div",K,[P((g(),S(D,{data:c.value,style:{width:"100%"},"empty-text":"Brak danych atrybutów SMART"},{default:t(()=>[e(n,{prop:"id",label:"ID",width:"80"}),e(n,{prop:"name",label:"Atrybut",width:"180"}),e(n,{prop:"value",label:"Wartość",width:"100",align:"center"}),e(n,{prop:"worst",label:"Najgorsza",width:"100",align:"center"}),e(n,{prop:"thresh",label:"Próg",width:"100",align:"center"}),e(n,{label:"Status",width:"120",align:"center"},{default:t(({row:f})=>[e(m,{type:y(f),size:"small",effect:"dark"},{default:t(()=>[d(o(w(f)),1)]),_:2},1032,["type"])]),_:1}),e(n,{label:"Surowe dane"},{default:t(({row:f})=>[f.raw.value!==void 0?(g(),S(k,{key:0,content:`Surowe dane: ${f.raw.value}`,placement:"top"},{default:t(()=>[v("span",null,o(a(f.raw.value)),1)]),_:2},1032,["content"])):(g(),T("span",Q,"-"))]),_:1})]),_:1},8,["data"])),[[B,p.value]])])}}},Y=C(X,[["__scopeId","data-v-7c9855fc"]]),Z={__name:"TestHistory",props:{tests:{type:Array,required:!0}},setup(r){const l=b=>{console.log("Show test details:",b)};return(b,p)=>{const c=u("el-table-column"),h=u("el-tag"),y=u("el-button"),w=u("el-table");return g(),S(w,{data:r.tests,style:{width:"100%"}},{default:t(()=>[e(c,{prop:"date",label:"Data",width:"180"}),e(c,{prop:"type",label:"Typ testu",width:"150"}),e(c,{prop:"status",label:"Status",width:"120"},{default:t(({row:a})=>[e(h,{type:a.status==="Completed"?"success":"warning"},{default:t(()=>[d(o(a.status),1)]),_:2},1032,["type"])]),_:1}),e(c,{prop:"remaining",label:"Pozostało",width:"100"}),e(c,{prop:"lifetime",label:"Godziny pracy"}),e(c,{label:"Akcje",width:"120"},{default:t(({row:a})=>[e(y,{size:"small",onClick:s=>l(a)},{default:t(()=>p[0]||(p[0]=[d(" Szczegóły ")])),_:2,__:[0]},1032,["onClick"])]),_:1})]),_:1},8,["data"])}}},ee={class:"details-header"},te={class:"header-title"},ae={class:"raw-data"},se={__name:"Details",setup(r){$.defaults.baseURL=`${window.location.protocol}//${window.location.hostname}:3000`;const l=L(),b=j(),p=z(decodeURIComponent(l.params.device)),c=z(null),h=z(!1),y=z(null),w=z("basic"),a=x(()=>c.value?.model||p.value),s=x(()=>JSON.stringify(c.value,null,2)),_=()=>{b.push("/storage/smart/devices")};return E(async()=>{try{h.value=!0,y.value=null;const m=await $.get(`/api/storage/smart/details/${encodeURIComponent(p.value)}`);c.value=m.data.data}catch(m){y.value=m.response?.data?.error||"Failed to load device details",console.error("Error fetching device details:",m)}finally{h.value=!1}}),(m,k)=>{const D=u("el-tag"),B=u("el-page-header"),f=u("el-tab-pane"),R=u("el-tabs"),N=u("el-card");return g(),S(N,{class:"smart-details-container"},{header:t(()=>[v("div",ee,[e(B,{onBack:_,content:a.value},{title:t(()=>[v("div",te,[e(i(O),{icon:"mdi:harddisk",width:"24",height:"24"}),k[1]||(k[1]=v("span",null,"Szczegóły urządzenia",-1))])]),extra:t(()=>[e(D,{type:"info",size:"large"},{default:t(()=>[d(o(p.value),1)]),_:1})]),_:1},8,["content"])])]),default:t(()=>[e(R,{modelValue:w.value,"onUpdate:modelValue":k[0]||(k[0]=M=>w.value=M),class:"smart-tabs"},{default:t(()=>[e(f,{label:"Podstawowe informacje",name:"basic"},{default:t(()=>[c.value?(g(),S(J,{key:0,device:c.value},null,8,["device"])):A("",!0)]),_:1}),e(f,{label:"Atrybuty SMART",name:"attributes"},{default:t(()=>[e(Y,{attributes:c.value?.ata_smart_attributes||{}},null,8,["attributes"])]),_:1}),e(f,{label:"Historia testów",name:"tests"},{default:t(()=>[c.value?.test_history?(g(),S(Z,{key:0,tests:c.value.test_history},null,8,["tests"])):A("",!0)]),_:1}),e(f,{label:"Surowe dane",name:"raw"},{default:t(()=>[v("pre",ae,o(s.value),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ne=C(se,[["__scopeId","data-v-f1db02c1"]]);export{ne as default};
