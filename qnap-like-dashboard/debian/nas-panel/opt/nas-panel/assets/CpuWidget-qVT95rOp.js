import{_ as D,u as F,r as l,c as h,o as S,K as T,b as u,v as k,x as B,h as N,e as U,w as d,f as e,g as i,t,k as o,a3 as V,m as A,y as L}from"./index-JqcLm-KS.js";const W={class:"widget-header"},$={class:"header-title"},j={class:"widget-body"},z={class:"metrics-grid"},E={class:"metric"},K={class:"metric__label"},O={class:"metric__value"},P={class:"metric"},q={class:"metric__label"},G={class:"metric__value"},H={class:"metric"},J={class:"metric__label"},Q={class:"metric__value"},R={class:"metric"},X={class:"metric__label"},Y={class:"metric__value"},Z={class:"update-info"},ee={class:"update-info__label"},ae={class:"update-info__time"},te={name:"CpuWidget",displayName:"CPU Status"},se=Object.assign(te,{setup(oe){const{t:a}=F(),s=l({usage:0,temperature:null,cores:0,load1:0,load5:0,load15:0}),g=[{color:"#67C23A",percentage:30},{color:"#E6A23C",percentage:70},{color:"#F56C6C",percentage:90}],m=l(a("common.loading")),_=l(!0),r=l(null);let p=null;const f=h(()=>r.value?"danger":s.value.usage>80?"warning":"success"),C=h(()=>r.value?a("common.error"):s.value.usage>80?a("cpu.status.highLoad"):a("cpu.status.normal")),y=()=>`${a("cpu.title")}: ${s.value.usage}%`,v=async()=>{try{_.value=!0;const c=(await L.get("/api/cpu")).data;s.value={usage:c.usage,temperature:c.temperature,cores:c.cores||navigator.hardwareConcurrency||4,load1:c.load1,load5:c.load5,load15:c.load15},m.value=new Date().toLocaleTimeString(),r.value=null}catch(n){console.error(a("common.errorFetching"),n),r.value=n.message,s.value={usage:Math.min(100,Math.round(Math.random()*40+10)),temperature:Math.round(Math.random()*10+50),cores:navigator.hardwareConcurrency||4,load1:Math.random().toFixed(2),load5:Math.random().toFixed(2),load15:Math.random().toFixed(2)}}finally{_.value=!1}};return S(()=>{v(),p=setInterval(v,5e3)}),T(()=>{p&&clearInterval(p)}),(n,c)=>{const w=u("el-icon"),x=u("el-tag"),M=u("el-progress"),b=u("el-card"),I=k("loading");return B((U(),N(b,{class:"widget-card",shadow:"hover"},{header:d(()=>[e("div",W,[i(w,{class:"header-icon"},{default:d(()=>[i(o(V))]),_:1}),e("span",$,t(o(a)("cpu.title")),1),i(x,{class:"status-tag",size:"small",type:f.value},{default:d(()=>[A(t(C.value),1)]),_:1},8,["type"])])]),default:d(()=>[e("div",j,[i(M,{percentage:s.value.usage,color:g,format:y,"stroke-width":6,class:"cpu-progress"},null,8,["percentage"]),e("div",z,[e("div",E,[e("span",K,t(o(a)("cpu.usage")),1),e("span",O,t(s.value.usage)+"%",1)]),e("div",P,[e("span",q,t(o(a)("cpu.temperature")),1),e("span",G,t(s.value.temperature||o(a)("common.na"))+"Â°C",1)]),e("div",H,[e("span",J,t(o(a)("systemInfo.cores")),1),e("span",Q,t(s.value.cores),1)]),e("div",R,[e("span",X,t(o(a)("cpu.load"))+" (1m)",1),e("span",Y,t(s.value.load1),1)])]),e("div",Z,[e("span",ee,t(o(a)("systemInfo.lastUpdate"))+":",1),e("span",ae,t(m.value),1)])])]),_:1})),[[I,_.value]])}}}),re=D(se,[["__scopeId","data-v-21c28eed"]]);export{re as default};
