import{_ as X,a as Y,r as d,s as Z,o as x,b as s,v as ee,d as F,e as h,f as _,g as t,m as r,k as f,I as p,t as o,w as l,F as te,l as ae,x as le,h as ne,y as $,E as V,z as E}from"./index-JqcLm-KS.js";const se={class:"interfaces-container"},oe={class:"header"},re={class:"actions"},ie={class:"action-buttons"},ce={__name:"Interfaces",setup(de){const T=Y(),I=d([]),b=d(!1),m=d(!1),w=d(!1),z=d(null),v=d(!1),g=d(""),k=d(!1),i=Z({name:"",type:"ethernet"}),U=[{value:"ethernet",label:"Ethernet"},{value:"bridge",label:"Most (Bridge)"},{value:"vlan",label:"VLAN"},{value:"bond",label:"Bonding"}],M={name:[{required:!0,message:"Nazwa interfejsu jest wymagana",trigger:"blur"},{pattern:/^[a-z][a-z0-9]+$/,message:"Nieprawidłowa nazwa interfejsu",trigger:"blur"}],type:[{required:!0,message:"Typ interfejsu jest wymagany",trigger:"change"}]},S=()=>{m.value=!0},q=e=>{g.value=e,v.value=!0},A=async()=>{try{await z.value.validate(),w.value=!0;const e=await $.post("/network/interfaces/add",{name:i.name,type:i.type});V({title:"Sukces",message:`Interfejs ${i.name} został dodany`,type:"success"}),m.value=!1,y()}catch(e){console.error("Błąd dodawania interfejsu:",e),E.error(e.response?.data?.message||"Błąd podczas dodawania interfejsu")}finally{w.value=!1}},L=async()=>{try{k.value=!0;const e=await $.delete(`/network/interfaces/remove/${g.value}`);V({title:"Sukces",message:e.data.message,type:"success"}),v.value=!1,y()}catch(e){console.error("Błąd usuwania interfejsu:",e),E.error(e.response?.data?.message||"Błąd podczas usuwania interfejsu")}finally{k.value=!1}},C=async()=>{try{b.value=!0;const e=await $.get("/network/interfaces");I.value=e.data}catch(e){console.error("Failed to fetch interfaces:",e),V({title:"Error",message:"Failed to load network interfaces",type:"error"})}finally{b.value=!1}},y=()=>{C()},R=e=>{T.push(`/network/interfaces/details/${e}`)};return x(()=>{C()}),(e,n)=>{const c=s("el-button"),G=s("el-input"),j=s("el-form-item"),H=s("el-option"),J=s("el-select"),K=s("el-form"),B=s("el-dialog"),u=s("el-table-column"),D=s("el-tag"),N=s("el-tooltip"),O=s("el-table"),P=s("el-card"),Q=ee("loading");return h(),F("div",se,[_("div",oe,[_("h2",null,[t(f(p),{icon:"mdi:ethernet-cable",width:"24",class:"header-icon"}),r(" "+o(e.$t("network.interfaces.title")),1)]),_("div",re,[t(c,{type:"primary",onClick:S,class:"add-button"},{default:l(()=>[t(f(p),{icon:"mdi:plus",width:"18",class:"button-icon"}),r(" "+o(e.$t("network.interfaces.add_interface")),1)]),_:1}),t(c,{type:"primary",onClick:y,class:"refresh-button"},{default:l(()=>[t(f(p),{icon:"mdi:refresh",width:"18",class:"button-icon"}),r(" "+o(e.$t("network.interfaces.refresh")),1)]),_:1})])]),t(B,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=a=>m.value=a),title:e.$t("network.interfaces.add_interface"),width:"500px"},{footer:l(()=>[t(c,{onClick:n[2]||(n[2]=a=>m.value=!1)},{default:l(()=>[r(o(e.$t("cancel")),1)]),_:1}),t(c,{type:"primary",onClick:A,loading:w.value},{default:l(()=>[r(o(e.$t("confirm")),1)]),_:1},8,["loading"])]),default:l(()=>[t(K,{model:i,rules:M,ref_key:"addInterfaceForm",ref:z},{default:l(()=>[t(j,{label:e.$t("network.interfaces.interface_name"),prop:"name"},{default:l(()=>[t(G,{modelValue:i.name,"onUpdate:modelValue":n[0]||(n[0]=a=>i.name=a),placeholder:"np. eth1"},null,8,["modelValue"])]),_:1},8,["label"]),t(j,{label:e.$t("network.interfaces.interface_type"),prop:"type"},{default:l(()=>[t(J,{modelValue:i.type,"onUpdate:modelValue":n[1]||(n[1]=a=>i.type=a),class:"w-full"},{default:l(()=>[(h(),F(te,null,ae(U,a=>t(H,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(P,{class:"interfaces-card",shadow:"hover"},{default:l(()=>[le((h(),ne(O,{data:I.value,class:"interfaces-table",stripe:""},{default:l(()=>[t(u,{prop:"device",label:e.$t("network.interfaces.device")},{default:l(({row:a})=>[t(f(p),{icon:a.type==="ethernet"?"mdi:ethernet-cable":"mdi:wifi",width:"20",class:"device-icon"},null,8,["icon"]),r(" "+o(a.device),1)]),_:1},8,["label"]),t(u,{prop:"method",label:e.$t("network.interfaces.method")},{default:l(({row:a})=>[t(D,{type:a.method==="dhcp"?"primary":"success",size:"small"},{default:l(()=>[r(o(a.method),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(u,{prop:"address",label:e.$t("network.interfaces.address")},null,8,["label"]),t(u,{prop:"netmask",label:e.$t("network.interfaces.netmask")},null,8,["label"]),t(u,{prop:"status",label:e.$t("network.interfaces.status")},{default:l(({row:a})=>[t(D,{type:a.status==="up"?"success":"danger",size:"small"},{default:l(()=>[r(o(a.status),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(u,{label:e.$t("network.interfaces.actions"),width:"150",align:"center","header-align":"center"},{default:l(({row:a})=>[_("div",ie,[t(N,{effect:"dark",content:e.$t("network.interfaces.details"),placement:"top"},{default:l(()=>[t(c,{size:"small",circle:"",onClick:W=>R(a.device),class:"action-button"},{default:l(()=>[t(f(p),{icon:"mdi:information-outline",width:"16"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),t(N,{effect:"dark",content:e.$t("network.interfaces.delete"),placement:"top",disabled:a.device==="eth0"||a.device==="lo"},{default:l(()=>[t(c,{size:"small",circle:"",type:"danger",onClick:W=>q(a.device),disabled:a.device==="eth0"||a.device==="lo",class:"action-button"},{default:l(()=>[t(f(p),{icon:"mdi:delete",width:"16"})]),_:2},1032,["onClick","disabled"])]),_:2},1032,["content","disabled"])])]),_:1},8,["label"])]),_:1},8,["data"])),[[Q,b.value]])]),_:1}),t(B,{modelValue:v.value,"onUpdate:modelValue":n[5]||(n[5]=a=>v.value=a),title:e.$t("network.interfaces.delete_interface"),width:"400px"},{footer:l(()=>[t(c,{onClick:n[4]||(n[4]=a=>v.value=!1)},{default:l(()=>[r(o(e.$t("network.interfaces.cancel")),1)]),_:1}),t(c,{type:"danger",onClick:L,loading:k.value},{default:l(()=>[r(o(e.$t("network.interfaces.confirm")),1)]),_:1},8,["loading"])]),default:l(()=>[_("p",null,o(e.$t("network.interfaces.delete_confirm",{interface:g.value})),1)]),_:1},8,["modelValue","title"])])}}},fe=X(ce,[["__scopeId","data-v-baa4c276"]]);export{fe as default};
