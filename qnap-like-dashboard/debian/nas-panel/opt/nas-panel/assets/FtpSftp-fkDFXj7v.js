import{_ as Be,u as Ie,a as Ne,r as v,C as Le,o as De,Q as Fe,b as m,d as U,e as _,f as u,h as $,i as C,g as e,w as s,k as n,I as i,m as p,t as o,y as k,E as y,B as _e,z as le}from"./index-JqcLm-KS.js";const Oe={class:"ftp-sftp-container"},Re={class:"service-cards"},Me={class:"card-header"},Ae={key:0,class:"loading-spinner"},He={key:1},Je={class:"status-content"},qe={class:"action-buttons"},Qe={class:"card-header"},We={key:0,class:"loading-spinner"},je={key:1},Ge={key:0,class:"install-mini-prompt"},Ke={key:1,class:"status-content"},Xe={class:"action-buttons"},Ye={class:"config-section"},Ze={class:"passive-ports"},xe={class:"unit"},et={class:"card-header"},tt={class:"shares-content"},st={class:"add-share"},lt={class:"config-section"},at={class:"card-header"},ot={class:"connections-content"},nt={key:1,class:"config-actions"},it={class:"install-content"},rt={class:"install-options"},pt={class:"custom-tree-node"},ft={style:{"margin-left":"6px"}},ut={__name:"FtpSftp",setup(dt){const{t:r}=Ie(),ve=Ne(),z=v(!0),S=v(!1),Q=v(!1),W=v(!1),N=v(!1),L=v("ftp"),ae=v("ftp"),D=v(!1),oe=v([]),M=v(null),ge={label:"name",children:"children",isLeaf:"isLeaf"},w=v({installed:!1,running:!1}),g=v({installed:!1,running:!1}),d=v({enabled:!0,port:21,anonymousLogin:!1,passivePorts:{min:49152,max:65534},maxClients:50,maxClientsPerIP:5,timeout:300,sslEnabled:!1,sslCertPath:"",additionalOptions:[]}),ne=v([]),j=v([]),G=v([]),B=v(!1),A=v(!1),b=v({path:"",alias:"",options:{allowOverwrite:!1,allowResume:!1}});let T=null;const ye=t=>t.includes("ESTAB")?"success":t.includes("TIME_WAIT")?"warning":"info",be=t=>{M.value=t.path},he=()=>{ve.push("/services/ssh")},$e=()=>{M.value?(b.value.path=M.value,D.value=!1,le.success(r("ftp_sftp.directory_selected"))):le.warning(r("ftp_sftp.no_directory_selected"))},we=async()=>{try{const t=await k.post("/api/filesystems/browse-directory",{path:b.value.path||"/"});console.log(t.data.directories),oe.value=t.data.directories,D.value=!0}catch(t){le.error("Failed to browse directory"),console.error("Browse error:",t)}},ke=async(t,l)=>{try{const H=(await k.post("/api/filesystems/browse-directory",{path:b.value.path||"/"})).data.directories.map(P=>({...P,children:[]}));l(H)}catch(f){console.error("Error loading directories:",f),l([])}},I=async(t,l)=>{try{S.value=!0;const f=await k.post("/api/services/ftp-sftp/toggle",{action:l,service:t});f.data.success&&(await X(),y.success({title:r("ftp_sftp.success"),message:f.data.message}))}catch(f){y.error({title:r("ftp_sftp.error"),message:f.response?.data?.error||r("ftp_sftp.service_toggle_error")})}finally{S.value=!1}},K=async t=>{try{N.value=!0;const l=await k.post("/api/services/ftp-sftp/install",{service:t});l.data.success&&(await X(),y.success({title:r("ftp_sftp.success"),message:l.data.message}))}catch(l){y.error({title:r("ftp_sftp.error"),message:l.response?.data?.error||r("ftp_sftp.install_error")})}finally{N.value=!1}},Ve=async()=>{try{Q.value=!0;const t=await k.post("/api/services/ftp-sftp/config",{config:d.value});t.data.success&&y.success({title:r("ftp_sftp.success"),message:t.data.message})}catch(t){let l=t.response?.data?.error||r("ftp_sftp.config_save_error");t.response?.data?.details?.includes("FTP user does not exist")&&(l=r("ftp_sftp.missing_user_error")),y.error({title:r("ftp_sftp.error"),message:l,duration:5e3})}finally{Q.value=!1}},Ce=async()=>{try{W.value=!0,await ie(!0),y.success({title:r("ftp_sftp.success"),message:r("ftp_sftp.config_reset")})}catch{y.error({title:r("ftp_sftp.error"),message:r("ftp_sftp.config_reset_error")})}finally{W.value=!1}},X=async()=>{try{z.value=!0;const t=await k.get("/api/services/ftp-sftp/status");w.value=t.data.ftp,g.value=t.data.sftp}catch{y.error({title:r("ftp_sftp.error"),message:r("ftp_sftp.status_fetch_error")})}finally{z.value=!1}},ie=async(t=!1)=>{try{z.value=!0;const l=await k.get("/api/services/ftp-sftp/config");l.success&&(d.value=l.config),await Y()}catch{y.error({title:r("ftp_sftp.error"),message:r("ftp_sftp.config_fetch_error")})}finally{z.value=!1}},Y=async()=>{try{const t=await k.get("/api/services/ftp-sftp/shares");t.data.success&&(ne.value=t.data.shares)}catch(t){console.error("Error fetching FTP shares:",t)}},Z=async()=>{try{if(j.value=[],G.value=[],w.value.installed&&w.value.running){const t=await k.get("/api/services/ftp-sftp/connections");t.data.success&&(j.value=t.data.connections)}if(g.value.installed&&g.value.running){const t=await k.get("/services/ssh/connections");t.data.success&&(G.value=t.data.connections)}}catch(t){console.error("Error fetching connections:",t)}},Se=()=>{b.value={path:"",alias:"",options:{allowOverwrite:!1,allowResume:!1}},A.value=!1,B.value=!0},Pe=t=>{b.value=JSON.parse(JSON.stringify(t)),A.value=!0,B.value=!0},Ue=async t=>{try{await _e.confirm(r("ftp_sftp.confirm_delete_share",{path:t.path}),r("ftp_sftp.warning"),{confirmButtonText:r("ftp_sftp.confirm"),cancelButtonText:r("ftp_sftp.cancel"),type:"warning"});const l=await k.post("/api/services/ftp-sftp/shares",{action:"remove",share:t});l.data.success&&(y.success({title:r("ftp_sftp.success"),message:l.data.message}),await Y())}catch(l){l!=="cancel"&&y.error({title:r("ftp_sftp.error"),message:l.response?.data?.error||r("ftp_sftp.share_delete_error")})}},Te=async()=>{try{const t=A.value?"update":"add",l=await k.post("/api/services/ftp-sftp/shares",{action:t,share:b.value});l.data.success&&(y.success({title:r("ftp_sftp.success"),message:l.data.message}),B.value=!1,await Y())}catch(t){y.error({title:r("ftp_sftp.error"),message:t.response?.data?.error||r("ftp_sftp.share_save_error")})}},re=async(t,l)=>{try{await _e.confirm(r("ftp_sftp.confirm_kill_connection",{pid:t}),r("ftp_sftp.warning"),{confirmButtonText:r("ftp_sftp.confirm"),cancelButtonText:r("ftp_sftp.cancel"),type:"warning"}),(await k.post("/api/services/ftp-sftp/kill-connection",{pid:t,service:l})).data.success&&(y.success({title:r("ftp_sftp.success"),message:r("ftp_sftp.connection_killed")}),await Z())}catch(f){f!=="cancel"&&y.error({title:r("ftp_sftp.error"),message:f.response?.data?.error||r("ftp_sftp.connection_kill_error")})}};return Le([w,g],([t,l])=>{t.installed?L.value="ftp":l.installed&&(L.value="sftp"),t.installed||l.installed?T||(Z(),T=setInterval(Z,1e4)):T&&(clearInterval(T),T=null)},{deep:!0}),De(()=>{X().then(()=>{ie()})}),Fe(()=>{T&&clearInterval(T)}),(t,l)=>{const f=m("el-tag"),H=m("el-icon"),P=m("el-descriptions-item"),pe=m("el-descriptions"),c=m("el-button"),E=m("el-card"),x=m("el-switch"),h=m("el-form-item"),F=m("el-input-number"),J=m("el-col"),fe=m("el-row"),ee=m("el-input"),te=m("el-form"),V=m("el-table-column"),q=m("el-tooltip"),Ee=m("el-button-group"),se=m("el-table"),O=m("el-tab-pane"),ue=m("el-alert"),de=m("el-tabs"),ce=m("el-checkbox"),me=m("el-dialog"),ze=m("el-tree");return _(),U("div",Oe,[u("div",Re,[e(E,{shadow:"hover",class:"status-card"},{header:s(()=>[u("div",Me,[e(n(i),{icon:"carbon:ftp",width:"24",height:"24"}),u("span",null,o(t.$t("ftp_sftp.ftp_service")),1),w.value.installed?C("",!0):(_(),$(f,{key:0,size:"small",type:"warning",class:"install-tag"},{default:s(()=>[e(n(i),{icon:"material-symbols:download"}),p(" "+o(t.$t("ftp_sftp.not_installed")),1)]),_:1}))])]),default:s(()=>[z.value?(_(),U("div",Ae,[e(H,{size:32,class:"is-loading"},{default:s(()=>[e(n(i),{icon:"svg-spinners:180-ring"})]),_:1})])):(_(),U("div",He,[u("div",Je,[e(pe,{column:1,border:""},{default:s(()=>[e(P,{label:t.$t("ftp_sftp.status")},{default:s(()=>[e(f,{type:w.value.running?"success":"danger"},{default:s(()=>[e(n(i),{icon:w.value.running?"material-symbols:check-circle-outline":"material-symbols:error-outline"},null,8,["icon"]),p(" "+o(w.value.running?t.$t("ftp_sftp.running"):t.$t("ftp_sftp.stopped")),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(P,{label:t.$t("ftp_sftp.port")},{default:s(()=>[e(f,null,{default:s(()=>[p(o(d.value.port||21),1)]),_:1})]),_:1},8,["label"]),e(P,{label:t.$t("ftp_sftp.anonymous_login")},{default:s(()=>[e(f,{type:d.value.anonymousLogin?"warning":"success"},{default:s(()=>[e(n(i),{icon:d.value.anonymousLogin?"mdi:account-eye":"mdi:account-lock"},null,8,["icon"]),p(" "+o(d.value.anonymousLogin?t.$t("ftp_sftp.enabled"):t.$t("ftp_sftp.disabled")),1)]),_:1},8,["type"])]),_:1},8,["label"])]),_:1}),u("div",qe,[w.value.running?(_(),$(c,{key:1,type:"danger",onClick:l[1]||(l[1]=a=>I("ftp","stop")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:stop"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.stop_service")),1)]),_:1},8,["loading"])):(_(),$(c,{key:0,type:"success",onClick:l[0]||(l[0]=a=>I("ftp","start")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:play-arrow"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.start_service")),1)]),_:1},8,["loading"])),e(c,{type:"warning",onClick:l[2]||(l[2]=a=>I("ftp","restart")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:restart-alt"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.restart_service")),1)]),_:1},8,["loading"])])])]))]),_:1}),e(E,{shadow:"hover",class:"status-card"},{header:s(()=>[u("div",Qe,[e(n(i),{icon:"material-symbols:lock",width:"24",height:"24"}),u("span",null,o(t.$t("ftp_sftp.sftp_service")),1),g.value.installed?C("",!0):(_(),$(f,{key:0,size:"small",type:"warning",class:"install-tag"},{default:s(()=>[e(n(i),{icon:"material-symbols:download"}),p(" "+o(t.$t("ftp_sftp.not_installed")),1)]),_:1}))])]),default:s(()=>[z.value?(_(),U("div",We,[e(H,{size:32,class:"is-loading"},{default:s(()=>[e(n(i),{icon:"svg-spinners:180-ring"})]),_:1})])):(_(),U("div",je,[g.value.installed?(_(),U("div",Ke,[e(pe,{column:1,border:""},{default:s(()=>[e(P,{label:t.$t("ftp_sftp.status")},{default:s(()=>[e(f,{type:g.value.running?"success":"danger"},{default:s(()=>[e(n(i),{icon:g.value.running?"material-symbols:check-circle-outline":"material-symbols:error-outline"},null,8,["icon"]),p(" "+o(g.value.running?t.$t("ftp_sftp.running"):t.$t("ftp_sftp.stopped")),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(P,{label:t.$t("ftp_sftp.port")},{default:s(()=>[e(f,null,{default:s(()=>l[28]||(l[28]=[p("22 (SSH)")])),_:1,__:[28]})]),_:1},8,["label"]),e(P,{label:t.$t("ftp_sftp.protocol")},{default:s(()=>[e(f,{type:"info"},{default:s(()=>l[29]||(l[29]=[p("SFTP (SSH)")])),_:1,__:[29]})]),_:1},8,["label"])]),_:1}),u("div",Xe,[g.value.running?(_(),$(c,{key:1,type:"danger",onClick:l[5]||(l[5]=a=>I("sftp","stop")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:stop"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.stop_service")),1)]),_:1},8,["loading"])):(_(),$(c,{key:0,type:"success",onClick:l[4]||(l[4]=a=>I("sftp","start")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:play-arrow"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.start_service")),1)]),_:1},8,["loading"])),e(c,{type:"warning",onClick:l[6]||(l[6]=a=>I("sftp","restart")),loading:S.value,plain:"",round:""},{icon:s(()=>[e(n(i),{icon:"material-symbols:restart-alt"})]),default:s(()=>[p(" "+o(t.$t("ftp_sftp.restart_service")),1)]),_:1},8,["loading"])])])):(_(),U("div",Ge,[u("p",null,o(t.$t("ftp_sftp.sftp_install_prompt")),1),e(c,{type:"success",size:"small",onClick:l[3]||(l[3]=a=>K("sftp")),loading:N.value,plain:""},{default:s(()=>[e(n(i),{icon:"material-symbols:download"}),p(" "+o(t.$t("ftp_sftp.install_sftp")),1)]),_:1},8,["loading"])]))]))]),_:1})]),w.value.installed||g.value.installed?(_(),$(de,{key:0,modelValue:L.value,"onUpdate:modelValue":l[17]||(l[17]=a=>L.value=a),class:"config-tabs"},{default:s(()=>[w.value.installed?(_(),$(O,{key:0,label:t.$t("ftp_sftp.ftp_config"),name:"ftp"},{default:s(()=>[e(E,{shadow:"hover",class:"config-card"},{default:s(()=>[u("div",Ye,[e(te,{"label-position":"top"},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.enable_service")},{default:s(()=>[e(x,{modelValue:d.value.enabled,"onUpdate:modelValue":l[7]||(l[7]=a=>d.value.enabled=a),"active-text":t.$t("ftp_sftp.enabled"),"inactive-text":t.$t("ftp_sftp.disabled"),"inline-prompt":"","active-color":"#13ce66"},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"]),e(fe,{gutter:20},{default:s(()=>[e(J,{span:12},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.port")},{default:s(()=>[e(F,{modelValue:d.value.port,"onUpdate:modelValue":l[8]||(l[8]=a=>d.value.port=a),min:1,max:65535,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(J,{span:12},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.anonymous_login")},{default:s(()=>[e(x,{modelValue:d.value.anonymousLogin,"onUpdate:modelValue":l[9]||(l[9]=a=>d.value.anonymousLogin=a),"active-text":t.$t("ftp_sftp.yes"),"inactive-text":t.$t("ftp_sftp.no"),"inline-prompt":"","active-color":"#13ce66"},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1})]),_:1}),e(h,{label:t.$t("ftp_sftp.passive_ports")},{default:s(()=>[u("div",Ze,[e(F,{modelValue:d.value.passivePorts.min,"onUpdate:modelValue":l[10]||(l[10]=a=>d.value.passivePorts.min=a),min:1024,max:65534,"controls-position":"right"},null,8,["modelValue"]),l[30]||(l[30]=u("span",{class:"port-separator"},"-",-1)),e(F,{modelValue:d.value.passivePorts.max,"onUpdate:modelValue":l[11]||(l[11]=a=>d.value.passivePorts.max=a),min:d.value.passivePorts.min+1,max:65535,"controls-position":"right"},null,8,["modelValue","min"])])]),_:1},8,["label"]),e(fe,{gutter:20},{default:s(()=>[e(J,{span:12},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.max_connections")},{default:s(()=>[e(F,{modelValue:d.value.maxClients,"onUpdate:modelValue":l[12]||(l[12]=a=>d.value.maxClients=a),min:1,max:1e3,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(J,{span:12},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.timeout")},{default:s(()=>[e(F,{modelValue:d.value.timeout,"onUpdate:modelValue":l[13]||(l[13]=a=>d.value.timeout=a),min:30,max:3600,"controls-position":"right"},null,8,["modelValue"]),u("span",xe,o(t.$t("ftp_sftp.seconds")),1)]),_:1},8,["label"])]),_:1})]),_:1}),e(h,{label:t.$t("ftp_sftp.ssl_tls")},{default:s(()=>[e(x,{modelValue:d.value.sslEnabled,"onUpdate:modelValue":l[14]||(l[14]=a=>d.value.sslEnabled=a),"active-text":t.$t("ftp_sftp.enabled"),"inactive-text":t.$t("ftp_sftp.disabled"),"inline-prompt":"","active-color":"#13ce66"},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"]),d.value.sslEnabled?(_(),$(h,{key:0,label:t.$t("ftp_sftp.ssl_cert_path")},{default:s(()=>[e(ee,{modelValue:d.value.sslCertPath,"onUpdate:modelValue":l[15]||(l[15]=a=>d.value.sslCertPath=a)},null,8,["modelValue"]),e(c,{type:"primary",plain:"",class:"browse-btn"},{default:s(()=>[e(n(i),{icon:"material-symbols:folder-open"}),p(" "+o(t.$t("ftp_sftp.browse")),1)]),_:1})]),_:1},8,["label"])):C("",!0)]),_:1})])]),_:1}),e(E,{shadow:"hover",class:"shares-card"},{header:s(()=>[u("div",et,[e(n(i),{icon:"mdi:folder-shared"}),u("span",null,o(t.$t("ftp_sftp.shared_folders")),1)])]),default:s(()=>[u("div",tt,[e(se,{data:ne.value,style:{width:"100%"},"empty-text":"No shared folders"},{default:s(()=>[e(V,{prop:"path",label:t.$t("ftp_sftp.path")},null,8,["label"]),e(V,{label:t.$t("ftp_sftp.options"),width:"200"},{default:s(a=>[a.row.options.allowOverwrite?(_(),$(f,{key:0,size:"small",type:"info"},{default:s(()=>[e(n(i),{icon:"material-symbols:edit"}),p(" "+o(t.$t("ftp_sftp.overwrite")),1)]),_:1})):C("",!0),a.row.options.allowResume?(_(),$(f,{key:1,size:"small",type:"info"},{default:s(()=>[e(n(i),{icon:"material-symbols:pause"}),p(" "+o(t.$t("ftp_sftp.resume")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),e(V,{label:t.$t("ftp_sftp.actions"),width:"150",align:"right"},{default:s(a=>[e(Ee,null,{default:s(()=>[e(q,{content:t.$t("ftp_sftp.edit"),placement:"top"},{default:s(()=>[e(c,{size:"small",onClick:R=>Pe(a.row),circle:""},{default:s(()=>[e(n(i),{icon:"material-symbols:edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),e(q,{content:t.$t("ftp_sftp.remove"),placement:"top"},{default:s(()=>[e(c,{size:"small",type:"danger",onClick:R=>Ue(a.row),circle:""},{default:s(()=>[e(n(i),{icon:"material-symbols:delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),u("div",st,[e(c,{type:"primary",onClick:Se,plain:""},{default:s(()=>[e(n(i),{icon:"material-symbols:add"}),p(" "+o(t.$t("ftp_sftp.add_share")),1)]),_:1})])])]),_:1})]),_:1},8,["label"])):C("",!0),g.value.installed?(_(),$(O,{key:1,label:t.$t("ftp_sftp.sftp_config"),name:"sftp"},{default:s(()=>[e(E,{shadow:"hover",class:"config-card"},{default:s(()=>[u("div",lt,[e(ue,{title:t.$t("ftp_sftp.sftp_note"),type:"info",closable:!1,"show-icon":""},null,8,["title"]),e(te,{"label-position":"top",class:"sftp-form"},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.sftp_status")},{default:s(()=>[e(f,{type:g.value.running?"success":"danger"},{default:s(()=>[e(n(i),{icon:g.value.running?"material-symbols:check-circle-outline":"material-symbols:error-outline"},null,8,["icon"]),p(" "+o(g.value.running?t.$t("ftp_sftp.running"):t.$t("ftp_sftp.stopped")),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(h,{label:t.$t("ftp_sftp.sftp_port")},{default:s(()=>[e(f,{type:"info"},{default:s(()=>[e(n(i),{icon:"mdi:network-port"}),p(" 22 ("+o(t.$t("ftp_sftp.same_as_ssh"))+") ",1)]),_:1})]),_:1},8,["label"]),e(h,{label:t.$t("ftp_sftp.sftp_users")},{default:s(()=>[e(ue,{title:t.$t("ftp_sftp.sftp_users_note"),type:"info",closable:!1,"show-icon":""},null,8,["title"])]),_:1},8,["label"]),e(h,null,{default:s(()=>[e(c,{type:"primary",onClick:he},{default:s(()=>[e(n(i),{icon:"material-symbols:settings"}),p(" "+o(t.$t("ftp_sftp.configure_ssh")),1)]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["label"])):C("",!0),e(O,{label:t.$t("ftp_sftp.connections"),name:"connections"},{default:s(()=>[e(E,{shadow:"hover",class:"connections-card"},{header:s(()=>[u("div",at,[e(n(i),{icon:"material-symbols:network-node"}),u("span",null,o(t.$t("ftp_sftp.active_connections")),1)])]),default:s(()=>[u("div",ot,[e(de,{modelValue:ae.value,"onUpdate:modelValue":l[16]||(l[16]=a=>ae.value=a)},{default:s(()=>[w.value.installed?(_(),$(O,{key:0,label:t.$t("ftp_sftp.ftp_connections"),name:"ftp"},{default:s(()=>[e(se,{data:j.value,style:{width:"100%"},"empty-text":"No active FTP connections"},{default:s(()=>[e(V,{prop:"user",label:t.$t("ftp_sftp.user")},{default:s(({row:a})=>[e(f,null,{default:s(()=>[e(n(i),{icon:"mdi:account"}),p(" "+o(a.user),1)]),_:2},1024)]),_:1},8,["label"]),e(V,{prop:"status",label:t.$t("ftp_sftp.status")},{default:s(({row:a})=>[e(f,{type:a.status==="active"?"success":"info"},{default:s(()=>[p(o(a.status),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(V,{prop:"time",label:t.$t("ftp_sftp.duration")},null,8,["label"]),e(V,{prop:"command",label:t.$t("ftp_sftp.command")},null,8,["label"]),e(V,{label:t.$t("ftp_sftp.actions"),width:"100",align:"right"},{default:s(({row:a})=>[e(q,{content:t.$t("ftp_sftp.disconnect"),placement:"top"},{default:s(()=>[e(c,{size:"small",type:"danger",onClick:R=>re(a.pid,"ftp"),circle:""},{default:s(()=>[e(n(i),{icon:"material-symbols:close"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])):C("",!0),g.value.installed?(_(),$(O,{key:1,label:t.$t("ftp_sftp.sftp_connections"),name:"sftp"},{default:s(()=>[e(se,{data:G.value,style:{width:"100%"},"empty-text":"No active SFTP connections"},{default:s(()=>[e(V,{prop:"user",label:t.$t("ftp_sftp.user")},{default:s(({row:a})=>[e(f,null,{default:s(()=>[e(n(i),{icon:"mdi:account"}),p(" "+o(a.user||"unknown"),1)]),_:2},1024)]),_:1},8,["label"]),e(V,{prop:"remote",label:t.$t("ftp_sftp.remote")},null,8,["label"]),e(V,{prop:"state",label:t.$t("ftp_sftp.state")},{default:s(({row:a})=>[e(f,{type:ye(a.state)},{default:s(()=>[p(o(a.state),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(V,{label:t.$t("ftp_sftp.actions"),width:"100",align:"right"},{default:s(({row:a})=>[e(q,{content:t.$t("ftp_sftp.disconnect"),placement:"top"},{default:s(()=>[e(c,{size:"small",type:"danger",onClick:R=>re(a.pid,"sftp"),circle:""},{default:s(()=>[e(n(i),{icon:"material-symbols:close"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])):C("",!0)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])):C("",!0),w.value.installed&&L.value==="ftp"?(_(),U("div",nt,[e(c,{type:"primary",onClick:Ve,loading:Q.value,round:""},{default:s(()=>[e(n(i),{icon:"material-symbols:save"}),p(" "+o(t.$t("ftp_sftp.save_config")),1)]),_:1},8,["loading"]),e(c,{onClick:Ce,loading:W.value,round:""},{default:s(()=>[e(n(i),{icon:"material-symbols:restart-alt"}),p(" "+o(t.$t("ftp_sftp.reset")),1)]),_:1},8,["loading"])])):C("",!0),!w.value.installed&&!g.value.installed?(_(),$(E,{key:2,shadow:"hover",class:"install-prompt"},{default:s(()=>[u("div",it,[e(n(i),{icon:"material-symbols:warning",width:"48",height:"48",class:"warning-icon"}),u("h3",null,o(t.$t("ftp_sftp.no_services_installed")),1),u("p",null,o(t.$t("ftp_sftp.install_prompt")),1),u("div",rt,[e(c,{type:"primary",onClick:l[18]||(l[18]=a=>K("ftp")),loading:N.value},{default:s(()=>[e(n(i),{icon:"carbon:ftp"}),p(" "+o(t.$t("ftp_sftp.install_ftp")),1)]),_:1},8,["loading"]),e(c,{type:"success",onClick:l[19]||(l[19]=a=>K("sftp")),loading:N.value},{default:s(()=>[e(n(i),{icon:"material-symbols:lock"}),p(" "+o(t.$t("ftp_sftp.install_sftp")),1)]),_:1},8,["loading"])])])]),_:1})):C("",!0),e(me,{modelValue:B.value,"onUpdate:modelValue":l[25]||(l[25]=a=>B.value=a),title:A.value?t.$t("ftp_sftp.edit_share"):t.$t("ftp_sftp.add_share"),width:"50%"},{footer:s(()=>[e(c,{onClick:l[24]||(l[24]=a=>B.value=!1)},{default:s(()=>[e(n(i),{icon:"material-symbols:cancel"}),p(" "+o(t.$t("ftp_sftp.cancel")),1)]),_:1}),e(c,{type:"primary",onClick:Te},{default:s(()=>[e(n(i),{icon:"material-symbols:check"}),p(" "+o(t.$t("ftp_sftp.confirm")),1)]),_:1})]),default:s(()=>[e(te,{model:b.value,"label-position":"top"},{default:s(()=>[e(h,{label:t.$t("ftp_sftp.path"),required:""},{default:s(()=>[e(ee,{modelValue:b.value.path,"onUpdate:modelValue":l[20]||(l[20]=a=>b.value.path=a)},{append:s(()=>[e(c,{onClick:we},{icon:s(()=>[e(n(i),{icon:"material-symbols:folder-open"})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(h,{label:t.$t("ftp_sftp.alias")},{default:s(()=>[e(ee,{modelValue:b.value.alias,"onUpdate:modelValue":l[21]||(l[21]=a=>b.value.alias=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(h,{label:t.$t("ftp_sftp.options")},{default:s(()=>[e(ce,{modelValue:b.value.options.allowOverwrite,"onUpdate:modelValue":l[22]||(l[22]=a=>b.value.options.allowOverwrite=a)},{default:s(()=>[e(n(i),{icon:"material-symbols:edit"}),p(" "+o(t.$t("ftp_sftp.allow_overwrite")),1)]),_:1},8,["modelValue"]),e(ce,{modelValue:b.value.options.allowResume,"onUpdate:modelValue":l[23]||(l[23]=a=>b.value.options.allowResume=a)},{default:s(()=>[e(n(i),{icon:"material-symbols:pause"}),p(" "+o(t.$t("ftp_sftp.allow_resume")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(me,{modelValue:D.value,"onUpdate:modelValue":l[27]||(l[27]=a=>D.value=a),title:t.$t("ftp_sftp.select_directory"),width:"60%"},{footer:s(()=>[e(c,{onClick:l[26]||(l[26]=a=>D.value=!1)},{default:s(()=>[p(o(t.$t("ftp_sftp.cancel")),1)]),_:1}),e(c,{type:"primary",onClick:$e,disabled:!M.value},{default:s(()=>[p(o(t.$t("ftp_sftp.confirm")),1)]),_:1},8,["disabled"])]),default:s(()=>[e(ze,{data:oe.value,props:ge,load:ke,lazy:"","node-key":"path",onNodeClick:be,"highlight-current":""},{default:s(({node:a,data:R})=>[u("span",pt,[e(n(i),{icon:R.isLeaf?"mdi:folder-outline":"mdi:folder-open-outline"},null,8,["icon"]),u("span",ft,o(a.label),1)])]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}},mt=Be(ut,[["__scopeId","data-v-7d783da0"]]);export{mt as default};
