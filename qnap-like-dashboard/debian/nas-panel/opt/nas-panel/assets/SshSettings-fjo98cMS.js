import{_ as J,r as p,o as Q,b as o,v as W,d as X,e as D,f as r,g as t,m as u,w as s,k as C,I as k,t as i,x as Y,h as Z,y as h,z as v}from"./index-JqcLm-KS.js";const x={class:"ssh-container"},ee={class:"ssh-header"},te={class:"service-controls"},se={class:"form-hint"},le={class:"form-hint"},ae={class:"form-hint"},ne={class:"status-info"},oe={style:{"margin-top":"20px"}},ie={class:"status-output"},de={class:"connections-header"},re={__name:"SshSettings",setup(ue){const U=p("basic"),g=p(!1),$=p(!1),f=p(!1),d=p({installed:!1,active:!1,version:"",details:""}),L=p([]),F={port:22,allowRootLogin:!1,passwordAuthentication:!0,publicKeyAuthentication:!0,tcpForwarding:!1,compression:!1,additionalOptions:""},a=p({...F}),b=async()=>{try{g.value=!0;const e=await h.get("/services/ssh/status");d.value=e.data}catch(e){v.error(e.response?.data?.error||e.message)}finally{g.value=!1}},H=async()=>{try{const e=await h.get("/services/ssh/config");a.value=e.data.config}catch(e){v.error(e.response?.data?.error||e.message)}},O=async()=>{try{f.value=!0;const e=await h.get("/services/ssh/connections");L.value=e.data.connections}catch(e){v.error(e.response?.data?.error||e.message)}finally{f.value=!1}},K=async()=>{try{g.value=!0;const e=d.value.active?"start":"stop";await h.post("/services/ssh/toggle",{action:e}),v.success(`SSH service ${e}ed successfully`),await b()}catch(e){d.value.active=!d.value.active,v.error(e.response?.data?.error||e.message)}finally{g.value=!1}},z=async()=>{try{$.value=!0,await h.post("/services/ssh/config",{config:a.value}),v.success("Settings saved successfully"),await b()}catch(e){v.error(e.response?.data?.error||e.message)}finally{$.value=!1}},I=()=>{a.value={...F}};return Q(()=>{b(),H(),O()}),(e,l)=>{const y=o("el-icon"),m=o("el-switch"),N=o("el-tag"),S=o("el-button"),R=o("el-input-number"),c=o("el-form-item"),B=o("el-col"),E=o("el-row"),M=o("el-input"),P=o("el-form"),w=o("el-card"),V=o("el-tab-pane"),A=o("el-descriptions-item"),T=o("el-descriptions"),_=o("el-table-column"),j=o("el-table"),q=o("el-tabs"),G=W("loading");return D(),X("div",x,[r("div",ee,[r("h2",null,[t(y,null,{default:s(()=>[t(C(k),{icon:"mdi:console-network"})]),_:1}),u(" "+i(e.$t("sshSettings.title")),1)]),r("div",te,[t(m,{modelValue:d.value.active,"onUpdate:modelValue":l[0]||(l[0]=n=>d.value.active=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled"),onChange:K,loading:g.value},null,8,["modelValue","active-text","inactive-text","loading"]),t(N,{type:d.value.active?"success":"danger"},{default:s(()=>[u(i(d.value.active?e.$t("sshSettings.running"):e.$t("sshSettings.stopped")),1)]),_:1},8,["type"]),t(S,{size:"small",onClick:b,loading:g.value},{default:s(()=>[t(y,null,{default:s(()=>[t(C(k),{icon:"mdi:refresh"})]),_:1}),u(" "+i(e.$t("sshSettings.refresh")),1)]),_:1},8,["loading"])])]),t(q,{modelValue:U.value,"onUpdate:modelValue":l[8]||(l[8]=n=>U.value=n),type:"border-card"},{default:s(()=>[t(V,{label:e.$t("sshSettings.basicSettings"),name:"basic"},{default:s(()=>[t(w,{class:"settings-card"},{default:s(()=>[t(P,{"label-position":"top",model:a.value,ref:"settingsForm"},{default:s(()=>[t(E,{gutter:20},{default:s(()=>[t(B,{md:12,sm:24},{default:s(()=>[t(c,{label:e.$t("sshSettings.port"),prop:"port"},{default:s(()=>[t(R,{modelValue:a.value.port,"onUpdate:modelValue":l[1]||(l[1]=n=>a.value.port=n),min:1,max:65535,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e.$t("sshSettings.rootLogin")},{default:s(()=>[t(m,{modelValue:a.value.allowRootLogin,"onUpdate:modelValue":l[2]||(l[2]=n=>a.value.allowRootLogin=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled")},null,8,["modelValue","active-text","inactive-text"]),r("div",se,i(e.$t("sshSettings.rootLoginHint")),1)]),_:1},8,["label"]),t(c,{label:e.$t("sshSettings.passwordAuth")},{default:s(()=>[t(m,{modelValue:a.value.passwordAuthentication,"onUpdate:modelValue":l[3]||(l[3]=n=>a.value.passwordAuthentication=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1}),t(B,{md:12,sm:24},{default:s(()=>[t(c,{label:e.$t("sshSettings.publicKeyAuth")},{default:s(()=>[t(m,{modelValue:a.value.publicKeyAuthentication,"onUpdate:modelValue":l[4]||(l[4]=n=>a.value.publicKeyAuthentication=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"]),t(c,{label:e.$t("sshSettings.tcpForwarding")},{default:s(()=>[t(m,{modelValue:a.value.tcpForwarding,"onUpdate:modelValue":l[5]||(l[5]=n=>a.value.tcpForwarding=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled")},null,8,["modelValue","active-text","inactive-text"]),r("div",le,i(e.$t("sshSettings.tcpForwardingHint")),1)]),_:1},8,["label"]),t(c,{label:e.$t("sshSettings.compression")},{default:s(()=>[t(m,{modelValue:a.value.compression,"onUpdate:modelValue":l[6]||(l[6]=n=>a.value.compression=n),"active-text":e.$t("sshSettings.enabled"),"inactive-text":e.$t("sshSettings.disabled")},null,8,["modelValue","active-text","inactive-text"]),r("div",ae,i(e.$t("sshSettings.compressionHint")),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(c,{label:e.$t("sshSettings.additionalOptions")},{default:s(()=>[t(M,{modelValue:a.value.additionalOptions,"onUpdate:modelValue":l[7]||(l[7]=n=>a.value.additionalOptions=n),type:"textarea",rows:3,placeholder:e.$t("sshSettings.additionalOptionsPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(c,null,{default:s(()=>[t(S,{type:"primary",onClick:z,loading:$.value},{default:s(()=>[u(i(e.$t("sshSettings.saveSettings")),1)]),_:1},8,["loading"]),t(S,{onClick:I},{default:s(()=>[u(i(e.$t("sshSettings.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["label"]),t(V,{label:e.$t("sshSettings.serviceStatus"),name:"status"},{default:s(()=>[t(w,null,{default:s(()=>[r("div",ne,[r("h3",null,i(e.$t("sshSettings.serviceDetails")),1),t(T,{column:1,border:""},{default:s(()=>[t(A,{label:e.$t("sshSettings.version")},{default:s(()=>[u(i(d.value.version||"N/A"),1)]),_:1},8,["label"]),t(A,{label:e.$t("sshSettings.installed")},{default:s(()=>[t(N,{type:d.value.installed?"success":"warning"},{default:s(()=>[u(i(d.value.installed?e.$t("sshSettings.yes"):e.$t("sshSettings.no")),1)]),_:1},8,["type"])]),_:1},8,["label"]),t(A,{label:e.$t("sshSettings.configPath")},{default:s(()=>l[9]||(l[9]=[u(" /etc/ssh/sshd_config ")])),_:1,__:[9]},8,["label"])]),_:1}),r("h3",oe,i(e.$t("sshSettings.statusOutput")),1),r("pre",ie,i(d.value.details),1)])]),_:1})]),_:1},8,["label"]),t(V,{label:e.$t("sshSettings.activeConnections"),name:"connections"},{default:s(()=>[t(w,null,{default:s(()=>[r("div",de,[r("h3",null,i(e.$t("sshSettings.currentConnections")),1),t(S,{size:"small",onClick:O,loading:f.value},{default:s(()=>[t(y,null,{default:s(()=>[t(C(k),{icon:"mdi:refresh"})]),_:1}),u(" "+i(e.$t("sshSettings.refresh")),1)]),_:1},8,["loading"])]),Y((D(),Z(j,{data:L.value,style:{width:"100%"},"empty-text":"No active connections"},{default:s(()=>[t(_,{prop:"local",label:e.$t("sshSettings.localAddress")},null,8,["label"]),t(_,{prop:"remote",label:e.$t("sshSettings.remoteAddress")},null,8,["label"]),t(_,{prop:"state",label:e.$t("sshSettings.state")},null,8,["label"]),t(_,{prop:"pid",label:e.$t("sshSettings.pid")},null,8,["label"])]),_:1},8,["data"])),[[G,f.value]])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}},pe=J(re,[["__scopeId","data-v-21cbb7be"]]);export{pe as default};
