import{_ as T,u as k,r as u,c as b,o as A,K as N,b as v,v as S,x as U,h as F,e as V,w as m,f as e,g as f,t,k as l,m as B,a6 as j,y as z}from"./index-JqcLm-KS.js";const K={class:"widget-header"},W={class:"header-title"},E={class:"widget-body"},G={class:"metrics-grid"},L={class:"metric"},O={class:"metric__label"},P={class:"metric__value"},$={class:"metric__total"},q={class:"metric"},H={class:"metric__label"},J={class:"metric__value"},Q={class:"metric"},X={class:"metric__label"},Y={class:"metric__value"},Z={class:"metric"},ee={class:"metric__label"},ae={class:"metric__value"},te={class:"update-info"},se={class:"update-info__label"},oe={class:"update-info__time"},ce={name:"RamWidget",displayName:"Informacje RAM"},re=Object.assign(ce,{setup(le){const{t:o}=k(),s=u({total:0,used:0,free:0,available:0,buffers:0,cached:0,active:0}),M=[{color:"#67C23A",percentage:50},{color:"#E6A23C",percentage:75},{color:"#F56C6C",percentage:90}],w=u(""),h=u(!0),_=u(null);let p=null;const n=b(()=>s.value.total===0?0:Math.round((s.value.total-s.value.available)/s.value.total*100)),x=b(()=>_.value?"danger":n.value>90?"warning":"success"),C=b(()=>_.value?o("ram.status.error"):n.value>90?o("ram.status.critical"):n.value>75?o("ram.status.high"):o("ram.status.normal")),R=()=>`RAM: ${n.value}%`,i=(r,a=2)=>{if(r===0)return"0 Bytes";const c=1024,g=["Bytes","KB","MB","GB","TB"],d=Math.floor(Math.log(r)/Math.log(c));return parseFloat((r/Math.pow(c,d)).toFixed(a))+" "+g[d]},y=async()=>{try{h.value=!0;const a=(await z.get("/api/ram")).data;s.value={total:a.total,used:a.used,free:a.free,available:a.available||a.free+a.buffers+a.cached,buffers:a.buffers||0,cached:a.cached||0,active:a.active||a.used},w.value=new Date().toLocaleTimeString(),_.value=null}catch(r){console.error("Błąd pobierania danych RAM:",r),_.value=r.message;const a=8*1024*1024*1024,c=Math.floor(Math.random()*6*1024*1024*1024);s.value={total:a,used:a-c,free:c,available:c,buffers:0,cached:0,active:a-c}}finally{h.value=!1}};return A(()=>{y(),p=setInterval(y,5e3)}),N(()=>{p&&clearInterval(p)}),(r,a)=>{const c=v("el-icon"),g=v("el-tag"),d=v("el-progress"),D=v("el-card"),I=S("loading");return U((V(),F(D,{class:"widget-card",shadow:"hover"},{header:m(()=>[e("div",K,[f(c,{class:"header-icon"},{default:m(()=>[f(l(j))]),_:1}),e("span",W,t(l(o)("ram.title")),1),f(g,{class:"status-tag",size:"small",type:x.value},{default:m(()=>[B(t(C.value),1)]),_:1},8,["type"])])]),default:m(()=>[e("div",E,[f(d,{percentage:n.value,color:M,format:R,"stroke-width":6,class:"ram-progress"},null,8,["percentage"]),e("div",G,[e("div",L,[e("span",O,t(l(o)("ram.used")),1),e("span",P,[B(t(i(s.value.used))+" ",1),e("span",$,"/ "+t(i(s.value.total)),1)])]),e("div",q,[e("span",H,t(l(o)("ram.available")),1),e("span",J,t(i(s.value.available)),1)]),e("div",Q,[e("span",X,t(l(o)("ram.buffers")),1),e("span",Y,t(i(s.value.buffers)),1)]),e("div",Z,[e("span",ee,t(l(o)("ram.cached")),1),e("span",ae,t(i(s.value.cached)),1)])]),e("div",te,[e("span",se,t(l(o)("ram.lastUpdate"))+":",1),e("span",oe,t(w.value),1)])])]),_:1})),[[I,h.value]])}}}),ie=T(re,[["__scopeId","data-v-80b0aad8"]]);export{ie as default};
